---
authors:
  - fering
tags:
  - строки
  - форматирование кода
---

# Форматирование строк в QSP

Решение [feat: add support `{...}` in expression](https://github.com/QSPFoundation/Qsp.FSharp/issues/20) задачи потянуло за собой кучу всего, в том числе и форматирование строк. И с ними, как выяснилось, не всё так просто.

Строки в QSP довольно навороченные: мало того, что у них есть `'<<$интерполяция_строк>>'`, так еще и `<p>вкрапления HTML</p>`, и что самое жуткое — `<a href="exec: gt ''дом''">гиперссылки с кодом</a>`

<!-- todo: рассказать про форматирование и где оно обитает -->

Конечно, у QSPLib нет никаких трудностей <!-- todo -->

```qsp
'1
 2
  3'
```

Вернет "лесенку":

```text
1
 2
  3
```

## Тонкости интерполяции

```qsp
apples = 10
peaches = 5
'Сейчас у меня:'
'* <<apples>> яблок;'
'* <<peaches>> персиков.'
''
'Всего у меня фруктов <<apples + peaches>>.'
```

Но так не работает.

```qsp
'Всего у меня фруктов <<apples _
  + peaches>>.'
```

## Код в `exec`

```qsp
'<a href="exec:
  ''Сюда можно положить прям любой код.''
  ''Только экранировать его нужно хорошенько''
">something</a>'
```
<!-- todo -->

## Код в `{}`

<!-- todo -->
```qsp
{
  apples = 10
  'Сейчас у меня — <<apples>> яблок.'
  'Но было б у меня в два раза больше яблок, тогда их было бы <<apples * 2>>!'
}
```
